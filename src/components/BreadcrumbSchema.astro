---
/**
 * Composant BreadcrumbSchema
 * Génère le JSON-LD pour le fil d'Ariane (SEO)
 * Améliore l'apparence dans les SERP Google
 */

interface BreadcrumbItem {
  name: string;
  url: string;
}

interface Props {
  items: BreadcrumbItem[];
}

const { items } = Astro.props;

// Construire le schema.org BreadcrumbList
const breadcrumbSchema = {
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": items.map((item, index) => ({
    "@type": "ListItem",
    "position": index + 1,
    "name": item.name,
    "item": `https://centrifugelab.fr${item.url}`
  }))
};
---

<!-- Schema.org JSON-LD pour fil d'Ariane -->
<script type="application/ld+json" set:html={JSON.stringify(breadcrumbSchema)} />

<!-- Fil d'Ariane visible (optionnel, recommandé pour UX) -->
<nav aria-label="Fil d'Ariane" class="breadcrumb-nav">
  <ol class="flex items-center space-x-2 text-sm text-gray-600 py-3">
    {items.map((item, index) => (
      <li class="flex items-center">
        {index > 0 && (
          <svg class="w-4 h-4 mx-2 text-gray-400" aria-hidden="true" viewBox="0 0 24 24" fill="none" aria-hidden="true">
            <path d="M9 5l7 7-7 7" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        )}
        {index === items.length - 1 ? (
          <span class="font-medium text-gray-900" aria-current="page">{item.name}</span>
        ) : (
          <a href={item.url} class="hover:text-blue-600 transition-colors">
            {item.name}
          </a>
        )}
      </li>
    ))}
  </ol>
</nav>

<style>
  .breadcrumb-nav {
    @apply mb-6;
  }

  @media (max-width: 640px) {
    .breadcrumb-nav ol {
      font-size: 0.875rem;
    }
  }
</style>
